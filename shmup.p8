pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
--init file
function _init()
	x=63
	y=100
	
	vel_x=0
	vel_y=0
	
	speed=3
	
	score = 0
	frame = 0
	
	
	flame = 4
	shipspr=2
	muzzle=0
	
	lives = 2
	maxlives= 3
	bombs = 3
	
	
	
	plbullets = {}
	stars = starfield()
	print(count(stars))
	foreach(stars,render_starfield)
end















-->8
--update
function _update()
	vel_x=0
	vel_y=0
	if(btn(0)) vel_x=-speed
	if(btn(1)) vel_x=speed
	if(btn(2)) vel_y=-speed
	if(btn(3)) vel_y=speed
	if(btnp(5)) then 
		boolet(x,y)
		
	end
	x=x+vel_x
	y=y+vel_y
	shipspr = 2
	if(vel_x>0) shipspr = 3
	if(vel_x<0) shipspr = 1
	
	
	if(x>128) x=0
	if(x<0) x=128
	if(y>128) y=0
	if(y<0) y=128
	
	flame+=1
	if(flame == 8) flame = 4
	
	frame+=1
	if(frame>60) frame = 0
end

-->8
--render

function _draw()
	--clear screen
	cls(0)
	
 --draw ship
	spr(shipspr,x,y)
	
	--draw flame
	spr(flame,x,y+8)
	foreach(stars,render_starfield)
	--draw bullets
	foreach(plbullets,draw_bullet)
	if(muzzle > 0) then
		circfill(x+2,y-1,muzzle,7)
		circfill(x+5,y-1,muzzle,7)
		muzzle=muzzle -1
	end
	
--ui
	print("score:"..score,50,0,12)
	
	for i=1,maxlives do
		if (lives>=i) then
			spr(49,0+i*9,0)
		end
		if (lives<i) then
			spr(50,0+i*9,0)
		end
	end
	
	for i=1,bombs do
		if (lives>=i) then
			spr(51,128-i*9)
		end

	end
	--debug
	--print(x.." "..y)
	--print(frame)
	--print(count(plbullets))
end




-->8
--everything to do with bullets
--also some other elements
function draw_bullet(o)
	--print("hello")
	
	if(o.y<-5) then
		del(plbullets,o)
		sfx(1)
	end
	
	o.y=o.y-10
	
	spr(o.bspr,o.x,o.y)
	if(o.bspr != 18) o.bspr+=1
end

function boolet(pl_x,pl_y)
	local bullet= {
	x = pl_x,
	y = pl_y-2,
	bspr = 16
	}
	sfx(0)
	muzzle=4
	add(plbullets,bullet)
end




function starfield()
	local star_list={}
	for i=1,100 do
		local star = {
			x = flr(rnd(128)),
			y = flr(rnd(128))
		}
		add(star_list,star)
	end
	return star_list
end


function render_starfield(o)
	o.y=(o.y+2)
	pset(o.x,o.y,7)
	if(o.y>=128) then 
		o.x=flr(rnd(128))
		o.y=0
	end
end
__gfx__
00000000033033000030030000330330008aa900008aa8000089a800009aa800008aa90000000000000000000000000000000000000000000000000000000000
000000000b99bb0000b99b0000bb99b0009a8000009aa900009a9900009a9900009a800000000000000000000000000000000000000000000000000000000000
007007000baabb0000baab0000bbaab0088a99900099a8000099a8000099a800088a999000000000000000000000000000000000000000000000000000000000
000770000111330001311310003311100000090000089a0000089a0000089a000000090000000000000000000000000000000000000000000000000000000000
00077000b1113310b131131b0133111b000000000008880000888800000888000000000000000000000000000000000000000000000000000000000000000000
0070070039a931b03b1991b30b139a93000000000000000000088000000000000000000000000000000000000000000000000000000000000000000000000000
0000000003b33b3003b33b3003b33b30000000000000000000008800000000000000000000000000000000000000000000000000000000000000000000000000
00000000003330000003300000033300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000990000999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00099000099aa99099aaaa9900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
009aa90009a77a909aa77aa900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
09a77a909a7777999a7777a900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
09a77a909a7777999a7777a900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
009aa90009a77a909aa77aa900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00099000099aa99099aaaa9900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000990000999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00022000088008800880088000000090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
002882008888888880088008001199a9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00288200888888888000000801111a90000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
02e88e208888888880000008016d1d10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2e87c8e2088888800800008001d66dd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
288118820088880000800800011d6d10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
028dd820000880000008800000111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00299200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
60606060600000000060000000006000000000000000000000000000000000000000000000000000000000000000000000006000000000600000000060606060
00000000006000000000600000000060000000000000000000000000000000000000000000000000000000000000000000600000000060000000006000000000
00000000000060000000006000000000606000000000000000000000000000000000000000000000000000000000006060000000006000000000600000000000
60606000000000600000000060000000000060000000000000000000000000000000000000000000000000000000600000000000600000000060000000006060
00000060000000006000000000600000000000606000000000000000000000000000000000000000000000006060000000000060000000006000000000600000
00000000600000000060000000006000000000000060606060606060606060600060606060606060606060600000000000006000000000600000000060000000
60600000006000000000000000000060000000000000000000000000000000006000000000000000000000000000000000600000000000000000006000000060
00006000000060000000600000000000606000000000000000000000000000000000000000000000000000000000006060000000000060000000600000006000
00000060000000600000006000000000000060606060606060606060606060606060606060606060606060606060600000000000006000000060000000600000
60000000600000006000000060000000000000000000000000000000606060606060606060000000000000000000000000000000600000006000000060000000
00600000000000000000000000606000000000000000000060606060606060606060606060606060600000000000000000006060000000000000000000000060
00006000006000000060000000000060606060606060606060606060606000000000006060606060606060606060606060600000000000600000006000006000
00000000000060000000600000000000000000000000606060606060606060606060606060606060606060000000000000000000000060000000600000000000
60000060000000600000006060000000000000006060606060600000000000000000000000000060606060606000000000000000606000000060000000600000
00000000600000006000000000606060606060606060606000000000000000000000000000000000006060606060606060606060000000006000000060000000
00600000000000000060000000000000000000606060606060606060606060606060606060606060606060606060000000000000000000600000000000000060
00006000006000000000600000000000006060606060000000000000000000000000000000000000000000606060606000000000000060000000006000006000
00000060000060000000006060606060600060600000000000000000000000000000000000000000000000000060600060606060606000000000600000600000
60000000000000600000000000000000606060606060606060606060606000000000006060606060606060606060606060000000000000000060000000000000
00600000600000006000000000000060606060000000000000000000000060606060600000000000000000000000606060600000000000006000000060000060
00000000006000000060606060606060606000000000000000000000000000000000000000000000000000000000006060606060606060600000006000000000
00006000000060000000000000006060606060606060606060000000000000000000000000000000606060606060606060606000000000000000600000006000
60000060000000600000000000606060600000000000000000606000000000000000000000006060000000000000000060606060000000000060000000600000
00000000000000006060606060006060000000000000000000000060606000000000006060600000000000000000000000606000606060606000000000000000
00600000600000000000000000606000606060606060000000000000000060606060600000000000000000606060606060006060000000000000000060000060
00006000006000000000006060600060000000000000600000000000000000000000000000000000000060000000000000600060606000000000006000006000
00000000000060606060600060606000000000000000006060000000000000000000000000000000606000000000000000006060600060606060600000000000
60000060000000000000006060606060606060600000000000600000000000000000000000000060000000000060606060606060606000000000000000600000
00600000600000000000606060600000000000006000000000006060000000000000000000606000000000006000000000000060606060000000000060000060
00000000006060606060000060000000000000000060000000000000606060600060606060000000000000600000000000000000600000606060606000000000
00006000000000000000606000606060606000000000600000000000000000006000000000000000000060000000006060606060006060000000000000006000
60000060000000000060606060000000000060000000006000000000000000000000000000000000006000000000600000000000606060600000000000600000
00600000606060606060606000000000000000600000000060600000000000000000000000000060600000000060000000000000006060606060606060000060
00000000000000000000000060606060600000006000000000006000000000000000000000006000000000006000000060606060600000000000000000000000
00006000000000006060606000000000006000000060000000000060600000000000000060600000000000600000006000000000006060606000000000006000
60000060606060606060600000000000000060000000600000000000006060606060606000000000000060000000600000000000000060606060606060600000
00000000000000000000006060606060000000000000006000000000000000000000000000000000006000000000000000606060606000000000000000000000
00600000000000606060600000000000600000600000000060000000000000000000000000000000600000000060000060000000000060606060000000000060
00006060006060600000000000000000000000006000000000600000000000000000000000000060000000006000000000000000000000000060606000606000
60000000600000006060006060606000006000000060000000006060000000000000000000606000000000600000006000006060606000606000000060000000
00600000000060606000600000000060000060000000600000000000606060606060606060000000000060000000600000600000000060006060600000000060
00006060606000000060000000000000000000600000006000000000000000000000000000000000006000000060000000000000000000600000006060606000
00000000000060606000606060600000600000000000000060000000000000000000000000000000600000000000000060000060606060006060600000000000
60000000006000000060000000006000006000006000000000606000000000000000000000006060000000006000006000006000000000600000006000000000
00606060600060606000000000000060000000000060000000000060606060606060606060600000000000600000000000600000000000006060600060606060
00000000006000000000606060000000000060000000600000000000000000000000000000000000000060000000600000000000606060000000006000000000
00000000600060600060000000600000600000600000006000000000000000000000000000000000006000000060000060000060000000600060600060000000
60606060006000006000000000006000000000000000000060606060606060606060606060606060600000000000000000006000000000006000006000606060
00000000000060600060606060000060006000006000000000000000000000000000000000000000000000006000006000600000606060600060600000000000
00000000600000006000000000600000000060000060000000000000006060606060606000000000000000600000600000000060000000006000000060000000
60606060006060000000000000006000600000000000606060606060606060606060606060606060606060000000000060006000000000000000606000606060
00000000600000600060606060000000000000600000000000000000606060606060606060000000000000000060000000000000606060600060000060000000
00000060006000006000000000000060006000006000000000006060606060000000606060606000000000006000006000600000000000006000006000600000
60606000000060600000000000600000000060000060606060600060600000000000000060600060606060600000600000000060000000000060600000006060
00000000606000000060606000006000600000000000000000006060006060606060606000606000000000000000000060006000006060600000006060000000
00000060000060006000000060000000000000600000000000606060600000000000000060606060000000000060000000000000600000006000600000600000
60606000600000600000000000600060006000006060606060606000000000000000000000006060606060606000006000600060000000000060000060006060
00000000006000000060606000006000000060000000000000000060006060606060606000600000000000000000600000006000006060600000006000000000
00000060000060006000000060000000600000600000000060606000600000000000000060006060600000000060000060000000600000006000600000600000
60606000600000600000000000600060006000006060606000000060000000000000000000600000006060606000006000600060000000000060000060006060
00000060006000000060606000000000000000000000000060600000006060606060606000000060600000000000000000000000006060600000006000600000
00000000600060006000000060006000600060000000006000006000600000000000000060006000006000000000600060006000600000006000600060000000
60606000000000600000000000600060000000606060600060000060000000000000000000600000600060606060000000600060000000000060000000006060
00000060006000000060606060000000006000000000006000600000000060606060600000000060006000000000006000000000606060600000006000600000
00006000600060006000000000006000600060000000000060006000006000000000006000006000600000000000600060006000000000006000600060006000
60600000000000600000000000600060000000606060600000000000600000000000000060000000000060606060000000600060000000000060000000000060
00000060006000000060606060006000006000000000006000600060000000000000000000600060006000000000006000006000606060600000006000600000
00006000600060006000000000600000600060000000600060000000000060606060600000000000600060000000600060000060000000006000600060006000
00600000000000600000000000000060000000600060000000006000006000000000006000006000000000600060000000600000000000000060000000000060
60000060006000000060606060006000006000006000006000600000600000000000000060000060006000006000006000006000606060600000006000600000
00006000000060006000000000600000600060000000600000000060000000000000000000600000000060000000600060000060000000006000600000006000
60600000600000000000000000006060000000606060000060000000000000000000000000000000600000606060000000606000000000000000000060000060
00000060006000600000606060600000606000000000000000006000000060606060600000006000000000000000006060000060606060000060006000600000
00006000000000000060000000000060000060000000006000600000006000000000006000000060006000000000600000600000000000600000000000006000
60600000600060006000000000006000006000606060600000000000600000000000000060000000000060606060006000006000000000006000600060000060
00000060000000000000606060600060600000000000000060000060000000000000000000600000600000000000000060600060606060000000000000600000
00000000006000600060000000006000006060000000006000000000000000000000000000000000006000000000606000006000000000600060006000000000
60606000600060000000000000000060600000606060600000006000000000000000000000006000000060606060000060600000000000000000600060006060
00000000000000006000006060606000606060000000000000600000000060606060600000000060000000000000606060006060606000006000000000000000
00000060006000600000600000000060000000600000000060000000606000000000006060000000600000000060000000600000000060000060006000600000
60606000000000000060000000000000606060006060606000000060000000000000000000600000006060606000606060000000000000600000000000006060
00000000600060000000000060606060000000600000000000006000000000000000000000006000000000000060000000606060600000000000600060000000
00000060000000006000006000000000606060006000000000600000000000000000000000000060000000006000606060000000006000006000000000600000
60606000006000600000600000000000006060600060606060000000000000606060000000000000606060600060606000000000000060000060006000006060
00000000600000000060000060606060600060006000000000000000006060000000606000000000000000006000600060606060600000600000000060000000
00000000000060000000000000000000006000600060000000000060600000000000000060600000000000600060006000000000000000000000600000000000
60606060000000006000006000000000000060606000606060606000000000000000000000006060606060006060600000000000006000006000000000606060
00000000006000600000600000006060606060606060000000000000000000000000000000000000000000606060606060606000000060000060006000000000
00000000600000000060000000600000000000606000600000000000000000606060000000000000000060006060000000000060000000600000000060000000
60606060000060000000000060000000000000006060006060606060606060000000606060606060606000606000000000000000600000000000600000606060
00000000000000006000006000000060606060600060600000000000000000000000000000000000000060600060606060600000006000006000000000000000
60000000006000000000600000006000000000006060606060000000000000000000000000000000606060606000000000006000000060000000006000000000
00606060600000600000000000600000000000000000606000606060606060606060606060606060006060000000000000000060000000000060000060606060
00000000000060000060000060000000606060606060606060600000000000000000000000000060606060606060606060000000600000600000600000000000
60000000006000006000006000000060000000000000006060606060000000000000000000606060606000000000000000600000006000006000006000000000
00606060600000000000000000006000000000000000000060606060606060606060606060606060600000000000000000006000000000000000000060606060
60000000000000600000600000600000000060606060606060606060606000000000006060606060606060606060600000000060000060000060000000000000
00600000000060000060000000000000006000000000000000006060606060606060606060606000000000000000006000000000000000600000600000000060
60006060606000000000000060000000600000000000000000000000006060606060606000000000000000000000000060000000600000000000006060606000
60600000000000006000006000000060000000006060606060606060606060606060606060606060606060606000000000600000006000006000000000000060
00006000000000600000000000006000000000600000000000000000000000000000000000000000000000000060000000006000000000000060000000006000
60600060606060000000600000600000000060000000000000000000000000000000000000000000000000000000600000000060000060000000606060600060
00006000000000000060000000000000006000000000006060606060606060606060606060606060606000000000006000000000000000600000000000006000
60600060000000006000000060000000600000000060600000000000000000000000000000000000000060600000000060000000600000006000000000600060
60606000606060600000006000000060000000006000000000000000000000000000000000000000000000006000000000600000006000000060606060006060
00000000000000000000600000006000000000600000000000000000606060606060606060000000000000000060000000006000000060000000000000000000
60606060000000000060000000600000000060000000000000606060000000000000000000606060000000000000600000000060000000600000000000606060
00606060606060606000000060000000006000000000006060000000000000000000000000000000606000000000006000000000600000006060606060606060
60006000600000000000000000000000600000000000600000000000000000000000000000000000000060000000000060000000000000000000000060006000
00600060006000000000606000000060000000006060000000000000000000000000000000000000000000606000000000600000006060000000006000600060
00006060600060606060000000006000000000600000000000000000606060606060606060000000000000000060000000006000000000606060600060606000
60600060606000000000000000600000000060000000000000006060000000000000000000606000000000000000600000000060000000000000006060600060
00006000600060000000000060000000006000000000000060600000000000000000000000000060600000000000006000000000600000000000600060006000
00000060006000606060606000000000600000000000606000000000000000000000000000000000006060000000000060000000006060606060006000600000
60606060606060000000000000000060000000000060000000000000000000000000000000000000000000600000000000600000000000000000606060606060
00000000606060600000000000006000000000006000000000000000000000000000000000000000000000006000000000006000000000000060606060000000
00000000006060606060606060600000000060600000000000000060606060606060606060600000000000000060600000000060606060606060606000000000
60606060600060000000000000000000006000000000000000606000000000000000000000006060000000000000006000000000000000000000600060606060
00000000006060606060000000000000600000000000006060000000000000000000000000000000606000000000000060000000000000606060606000000000
00000000000000606000606060606060000000000000600000000000000000000000000000000000000060000000000000606060606060006060000000000000
00606060606060006060000000000000000000006060000000000000000000000000000000000000000000606000000000000000000000606000606060606060
60000000000000606060600000000000000060600000000000000000000060606060600000000000000000000060600000000000000060606060000000000000
00000000000000006060606060606060606000000000000000006060606000000000006060606000000000000000006060606060606060606000000000000000
00000000000000000060606000000000000000000000000060600000000000000000000000000060600000000000000000000000006060600000000000000000
00000000000000000000606060000000000000000060606000000000000000000000000000000000006060600000000000000000606060000000000000000000
00000000000000000000006060606060606060606000000000000000000000000000000000000000000000006060606060606060606000000000000000000000
00000000000000000000000060600000000000000000000000000000000000000000000000000000000000000000000000000060600000000000000000000000
00000000000000000000000000606060000000000000000000006060606060606060606060606000000000000000000000606060000000000000000000000000

__sfx__
000100001d5100e5100d510077100671005710047100e5100e510095100851007510065100651006510055100350000500005000d4000d400340000c4000b4000b40006000060000600005000050000400004000
000100001361017610126101462018610046100461004610076100a610096100a6000a60000600036000460003600036000360003600036000360001400014000040000400004000040000400004000140001400
